(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));r.displayName="Card";let i=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let n=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));n.displayName="CardTitle",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";let d=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>d,"CardHeader",()=>i,"CardTitle",()=>n])},87486,2747,e=>{"use strict";var t=e.i(43476),s=e.i(25913),a=e.i(75157);let r=(0,s.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,...i}){return(0,t.jsx)("div",{className:(0,a.cn)(r({variant:s}),e),...i})}function n({className:e,...s}){return(0,t.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...s})}e.s(["Badge",()=>i],87486),e.s(["Skeleton",()=>n],2747)},1928,e=>{"use strict";let t=(0,e.i(75254).default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);e.s(["ShoppingCart",()=>t],1928)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},35145,e=>{"use strict";var t=e.i(43476),s=e.i(46932),a=e.i(75157);function r({title:e,value:r,icon:i,trend:n,variant:d="default",delay:o=0}){return(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:o},className:(0,a.cn)("relative overflow-hidden rounded-xl p-6 shadow-card transition-all duration-300 hover:shadow-card-hover","primary"===d&&"gradient-primary text-primary-foreground","accent"===d&&"bg-accent text-accent-foreground","default"===d&&"bg-card text-card-foreground"),children:[(0,t.jsx)("div",{className:(0,a.cn)("absolute -right-4 -top-4 w-24 h-24 rounded-full opacity-10","default"===d?"bg-primary":"bg-primary-foreground")}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:(0,a.cn)("w-12 h-12 rounded-xl flex items-center justify-center","default"===d?"bg-primary/10 text-primary":"bg-primary-foreground/20 text-primary-foreground"),children:(0,t.jsx)(i,{className:"w-6 h-6"})}),n&&(0,t.jsxs)("span",{className:(0,a.cn)("text-sm font-medium px-2 py-1 rounded-full",n.isPositive?"bg-success/20 text-success":"bg-destructive/20 text-destructive"),children:[n.isPositive?"+":"",n.value,"%"]})]}),(0,t.jsx)("h3",{className:(0,a.cn)("text-sm font-medium mb-1","default"===d?"text-muted-foreground":"text-primary-foreground/80"),children:e}),(0,t.jsx)("p",{className:"text-3xl font-display font-bold",children:r})]})]})}e.s(["StatCard",()=>r])},78917,e=>{"use strict";let t=(0,e.i(75254).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],78917)},74886,e=>{"use strict";let t=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},66355,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(46932),r=e.i(21345),i=e.i(12426),n=e.i(1928),d=e.i(25652),o=e.i(78917),l=e.i(74886),c=e.i(35145),m=e.i(15288),x=e.i(87486),u=e.i(19455),f=e.i(57951),p=e.i(46696),h=e.i(2747);function g(){let{user:e}=(0,f.useAuth)(),[g,y]=(0,s.useState)(null),[j,v]=(0,s.useState)([]),[N,b]=(0,s.useState)([]),[w,C]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{if(!e?.id)return C(!1);try{let[t,s,a]=await Promise.all([fetch(`/api/affiliator/stats?affiliatorId=${e.id}`),fetch(`/api/affiliator/links?affiliatorId=${e.id}`),fetch(`/api/affiliator/commissions?affiliatorId=${e.id}`)]);if(t.ok&&s.ok&&a.ok){let e=await t.json(),r=await s.json(),i=await a.json();y(e),v(r),b(i.slice(0,3))}else p.toast.error("Failed to load dashboard data.")}catch(e){console.error("Failed to fetch initial data:",e),p.toast.error("An error occurred while loading data.")}finally{C(!1)}})()},[e]),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-display font-bold text-foreground mb-2",children:["Welcome back, ",e?.name?.split(" ")[0],"! ðŸ‘‹"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Here's an overview of your affiliate performance"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Skeleton,{className:"h-32"}),(0,t.jsx)(h.Skeleton,{className:"h-32"}),(0,t.jsx)(h.Skeleton,{className:"h-32"}),(0,t.jsx)(h.Skeleton,{className:"h-32"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.StatCard,{title:"Total Earnings",value:`$${g?.totalCommissions.toLocaleString()||"0"}`,icon:i.DollarSign,variant:"primary",delay:0}),(0,t.jsx)(c.StatCard,{title:"Active Links",value:j.length.toString(),icon:r.Link,delay:.1}),(0,t.jsx)(c.StatCard,{title:"Total Conversions",value:g?.totalOrders.toString()||"0",icon:n.ShoppingCart,delay:.2}),(0,t.jsx)(c.StatCard,{title:"Conversion Rate",value:`${g?.conversionRate||"0.00"}%`,icon:d.TrendingUp,delay:.3})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},children:(0,t.jsxs)(m.Card,{className:"shadow-card",children:[(0,t.jsx)(m.CardHeader,{className:"flex flex-row items-center justify-between",children:(0,t.jsxs)(m.CardTitle,{className:"text-lg font-display flex items-center gap-2",children:[(0,t.jsx)(r.Link,{className:"w-5 h-5 text-primary"}),"Your Affiliate Links"]})}),(0,t.jsx)(m.CardContent,{children:w?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(h.Skeleton,{className:"h-20"}),(0,t.jsx)(h.Skeleton,{className:"h-20"})]}):j.length>0?(0,t.jsx)("div",{className:"space-y-4",children:j.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/50 hover:bg-secondary transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"font-medium text-foreground",children:e.product?.name||"Unknown Product"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(u.Button,{size:"sm",variant:"ghost",onClick:()=>{var t,s;let a;return t=e.code,s=e.product?.slug||"unknown",a=`${window.location.origin}/checkout/${s}?ref=${t}`,void(navigator.clipboard.writeText(a),p.toast.success("Link copied to clipboard!"))},children:(0,t.jsx)(l.Copy,{className:"w-4 h-4"})}),(0,t.jsx)(u.Button,{size:"sm",variant:"ghost",children:(0,t.jsx)(o.ExternalLink,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Code"}),(0,t.jsx)("p",{className:"font-semibold text-foreground",children:e.code})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Commission"}),(0,t.jsx)("p",{className:"font-semibold text-foreground",children:e.product?.commissionValue&&e.product?.commissionType?`${e.product.commissionValue}${"percentage"===e.product.commissionType?"%":""}`:"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Status"}),(0,t.jsx)(x.Badge,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})]})]})]},e.id))}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No affiliate links yet."})})]})}),(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.5},children:(0,t.jsxs)(m.Card,{className:"shadow-card",children:[(0,t.jsx)(m.CardHeader,{className:"flex flex-row items-center justify-between",children:(0,t.jsxs)(m.CardTitle,{className:"text-lg font-display flex items-center gap-2",children:[(0,t.jsx)(i.DollarSign,{className:"w-5 h-5 text-success"}),"Recent Commissions"]})}),(0,t.jsx)(m.CardContent,{children:w?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(h.Skeleton,{className:"h-20"}),(0,t.jsx)(h.Skeleton,{className:"h-20"})]}):N.length>0?(0,t.jsx)("div",{className:"space-y-4",children:N.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-secondary/50 hover:bg-secondary transition-colors",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.productName}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(e.date).toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-semibold text-foreground",children:["$",e.amount]}),(0,t.jsx)(x.Badge,{variant:"secondary",className:{pending:"bg-accent/20 text-accent-foreground",approved:"bg-primary/20 text-primary",paid:"bg-success/20 text-success",cancelled:"bg-destructive/20 text-destructive"}[e.status]||"bg-gray-100 text-gray-800",children:e.status})]})]},e.id))}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No recent commissions."})})]})})]}),(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.6},children:(0,t.jsx)(m.Card,{className:"bg-gradient-to-r from-primary/10 to-accent/10 border-primary/20 shadow-card",children:(0,t.jsx)(m.CardContent,{className:"py-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary/20 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(d.TrendingUp,{className:"w-6 h-6 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-display font-semibold text-foreground mb-1",children:"Pro Tip: Increase Your Earnings"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Share your affiliate links on social media and email newsletters to reach more potential customers. Products with higher conversion rates should be prioritized in your promotions."})]})]})})})})]})}e.s(["default",()=>g])}]);