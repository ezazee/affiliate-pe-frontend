module.exports=[15618,81560,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>c],15618);let d=(0,b.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>d],81560)},5151,a=>{"use strict";let b=(0,a.i(70106).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);a.s(["Copy",()=>b],5151)},52495,a=>{"use strict";let b=(0,a.i(70106).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],52495)},18088,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(15618),f=a.i(5151),g=a.i(52495),h=a.i(79257),i=a.i(81560),j=a.i(99570),k=a.i(86304),l=a.i(91119),m=a.i(14574),n=a.i(80701),o=a.i(70430),p=a.i(11642),q=a.i(23292),r=a.i(33140);function s(){let a,{user:s}=(0,p.useAuth)(),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{if(!s?.id)return y(!1);try{let[a,b]=await Promise.all([fetch(`/api/affiliator/links?affiliatorId=${s.id}`),fetch("/api/admin/products")]);if(a.ok&&b.ok){let c=await a.json(),d=await b.json();u(c),w(d)}else q.toast.error("Failed to load data.")}catch(a){console.error("Failed to fetch initial data:",a),q.toast.error("An error occurred while loading data.")}finally{y(!1)}})()},[s]);let D=a=>v.find(b=>b._id?.toString()===a),E=v.filter(a=>a.isActive&&!t.some(b=>b.productId===a._id?.toString())),F=async()=>{if(B&&s)try{let a=await fetch("/api/affiliator/links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({affiliatorId:s.id,productId:B,code:(()=>{let a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",b="";for(let c=0;c<8;c++)b+=a.charAt(Math.floor(Math.random()*a.length));return b})(),isActive:!0})});if(a.ok){let b=await a.json();u(a=>[...a,b]),A(!1),C(""),q.toast.success("Affiliate link created!")}else q.toast.error("Failed to create affiliate link.")}catch(a){console.error("Failed to create link:",a),q.toast.error("An error occurred while creating link.")}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-display font-bold text-foreground mb-2",children:"My Affiliate Links"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Create and manage your affiliate links"})]}),(0,b.jsxs)(m.Dialog,{open:z,onOpenChange:A,children:[(0,b.jsx)(m.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(j.Button,{variant:"hero",disabled:0===E.length,children:[(0,b.jsx)(e.Plus,{className:"w-4 h-4 mr-2"}),"Create Link"]})}),(0,b.jsxs)(m.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsx)(m.DialogHeader,{children:(0,b.jsx)(m.DialogTitle,{className:"font-display",children:"Create Affiliate Link"})}),(0,b.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(o.Label,{children:"Select Product"}),(0,b.jsxs)(n.Select,{value:B,onValueChange:C,children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{placeholder:"Choose a product"})}),(0,b.jsx)(n.SelectContent,{children:E.map(a=>(0,b.jsx)(n.SelectItem,{value:a._id?.toString(),children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,b.jsx)("span",{children:a.name}),(0,b.jsxs)("span",{className:"text-muted-foreground ml-2",children:["$",a.price]})]})},a._id?.toString()))})]})]}),B&&(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-secondary",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Commission:"}),(0,b.jsx)("p",{className:"font-semibold text-primary",children:(a=D(B))?"percentage"===a.commissionType?`${a.commissionValue}% per sale`:`$${a.commissionValue} per sale`:""})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,b.jsx)(j.Button,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),(0,b.jsx)(j.Button,{onClick:F,disabled:!B,children:"Generate Link"})]})]})]})]})]}),x?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(r.Skeleton,{className:"h-28"}),(0,b.jsx)(r.Skeleton,{className:"h-28"}),(0,b.jsx)(r.Skeleton,{className:"h-28"})]}):(0,b.jsx)("div",{className:"grid gap-4",children:t.map((a,c)=>{let e=D(a.productId);if(!e)return null;let m=`${window.location.origin}/checkout/${e.slug}?ref=${a.code}`;return(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*c},children:(0,b.jsx)(l.Card,{className:"shadow-card hover:shadow-card-hover transition-all duration-300",children:(0,b.jsx)(l.CardContent,{className:"p-5",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:e.name}),(0,b.jsx)(k.Badge,{variant:a.isActive?"default":"secondary",className:`cursor-pointer ${a.isActive?"bg-success text-success-foreground":""}`,onClick:()=>{var b;console.log("Frontend Toggle Active Link ID:",b=a.id),u(a=>a.map(a=>a.id===b?{...a,isActive:!a.isActive}:a))},children:a.isActive?"Active":"Inactive"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-secondary text-sm font-mono",children:[(0,b.jsx)(h.Link,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate text-muted-foreground",children:m})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Code: ",(0,b.jsx)("code",{className:"text-primary font-semibold",children:a.code})]}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsxs)("span",{children:["Commission: ","percentage"===e.commissionType?`${e.commissionValue}%`:`$${e.commissionValue}`]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(j.Button,{size:"sm",variant:"default",onClick:()=>{var b,c;let d;return b=a.code,c=e.slug,d=`${window.location.origin}/checkout/${c}?ref=${b}`,void(navigator.clipboard.writeText(d),q.toast.success("Link copied to clipboard!"))},children:[(0,b.jsx)(f.Copy,{className:"w-4 h-4 mr-1"}),"Copy"]}),(0,b.jsx)(j.Button,{size:"sm",variant:"outline",onClick:()=>window.open(m,"_blank"),children:(0,b.jsx)(g.ExternalLink,{className:"w-4 h-4"})}),(0,b.jsx)(j.Button,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>{var b;console.log("Frontend Delete Link ID:",b=a.id),u(a=>a.filter(a=>a.id!==b)),q.toast.success("Link deleted")},children:(0,b.jsx)(i.Trash2,{className:"w-4 h-4"})})]})]})})})},a.id)})}),!x&&0===t.length&&(0,b.jsx)(l.Card,{className:"shadow-card",children:(0,b.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(h.Link,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-2",children:"No affiliate links yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create your first affiliate link to start earning commissions"}),(0,b.jsxs)(j.Button,{variant:"hero",onClick:()=>A(!0),children:[(0,b.jsx)(e.Plus,{className:"w-4 h-4 mr-2"}),"Create Your First Link"]})]})}),(0,b.jsxs)(l.Card,{className:"bg-gradient-to-r from-primary/5 to-accent/5 border-primary/20",children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{className:"text-lg font-display",children:"ðŸ’¡ Tips for Success"})}),(0,b.jsxs)(l.CardContent,{className:"space-y-2 text-sm text-muted-foreground",children:[(0,b.jsx)("p",{children:"â€¢ Share your links on social media platforms for maximum reach"}),(0,b.jsx)("p",{children:"â€¢ Include your affiliate link in email newsletters"}),(0,b.jsx)("p",{children:"â€¢ Create content around the products you're promoting"}),(0,b.jsx)("p",{children:"â€¢ Track which links perform best and focus on those products"})]})]})]})}a.s(["default",()=>s])}];

//# sourceMappingURL=_c700aadd._.js.map