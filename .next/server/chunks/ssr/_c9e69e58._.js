module.exports=[41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},30553,a=>{"use strict";var b=a.i(72131),c=a.i(35112),d=a.i(11011),e=a.i(87924),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,c)=>{let f=(0,d.createSlot)(`Primitive.${c}`),g=b.forwardRef((a,b)=>{let{asChild:d,...g}=a;return(0,e.jsx)(d?f:c,{...g,ref:b})});return g.displayName=`Primitive.${c}`,{...a,[c]:g}},{});function g(a,b){a&&c.flushSync(()=>a.dispatchEvent(b))}a.s(["Primitive",()=>f,"dispatchDiscreteCustomEvent",()=>g])},66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c})).displayName="CardDescription";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));h.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},86304,33140,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(68114);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}function g({className:a,...c}){return(0,b.jsx)("div",{className:(0,d.cn)("animate-pulse rounded-md bg-muted",a),...c})}a.s(["Badge",()=>f],86304),a.s(["Skeleton",()=>g],33140)},33441,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],87532)},35041,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(87532),f=a.i(33441),g=a.i(33508),h=a.i(70106);let i=(0,h.default)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),j=(0,h.default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var k=a.i(41710),l=a.i(60246),m=a.i(99570),n=a.i(66718),o=a.i(86304),p=a.i(91119),q=a.i(80701),r=a.i(23292),s=a.i(33140);function t({children:a}){let[d,e]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{e(!0)},[]),d)?(0,b.jsx)(b.Fragment,{children:a}):null}function u(){let[a,h]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)("all");(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/admin/affiliators");if(a.ok){let b=await a.json();h(b)}}catch(a){console.error("Failed to fetch affiliators:",a),r.toast.error("Failed to load affiliators.")}finally{v(!1)}})()},[]);let A=a.filter(a=>{let b=a.name.toLowerCase().includes(w.toLowerCase())||a.email.toLowerCase().includes(w.toLowerCase()),c="all"===y||a.status===y;return b&&c}),B=async(a,b)=>{console.log("Frontend User ID being sent:",a);try{(await fetch(`/api/admin/affiliators/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})})).ok?(h(c=>c.map(c=>c.id===a?{...c,status:b}:c)),r.toast.success(`Affiliator ${b}`)):r.toast.error("Failed to update affiliator status.")}catch(a){console.error("Failed to update status:",a),r.toast.error("An error occurred while updating status.")}},C={total:a.length,pending:a.filter(a=>"pending"===a.status).length,approved:a.filter(a=>"approved"===a.status).length,suspended:a.filter(a=>"suspended"===a.status).length};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-display font-bold text-foreground mb-2",children:"Affiliators"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage affiliator registrations and status"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Total",value:C.total,color:"bg-primary/10 text-primary"},{label:"Pending",value:C.pending,color:"bg-accent/10 text-accent-foreground"},{label:"Approved",value:C.approved,color:"bg-success/10 text-success"},{label:"Suspended",value:C.suspended,color:"bg-muted text-muted-foreground"}].map(a=>(0,b.jsxs)("div",{className:`rounded-xl p-4 ${a.color}`,children:[(0,b.jsx)("p",{className:"text-2xl font-display font-bold",children:a.value}),(0,b.jsx)("p",{className:"text-sm opacity-80",children:a.label})]},a.label))}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(e.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(n.Input,{placeholder:"Search by name or email...",value:w,onChange:a=>x(a.target.value),className:"pl-10"})]}),(0,b.jsx)(t,{children:(0,b.jsxs)(q.Select,{value:y,onValueChange:z,children:[(0,b.jsx)(q.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(q.SelectValue,{placeholder:"Filter by status"})}),(0,b.jsxs)(q.SelectContent,{children:[(0,b.jsx)(q.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(q.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(q.SelectItem,{value:"approved",children:"Approved"}),(0,b.jsx)(q.SelectItem,{value:"rejected",children:"Rejected"}),(0,b.jsx)(q.SelectItem,{value:"suspended",children:"Suspended"})]})]})})]}),u?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(s.Skeleton,{className:"h-24"}),(0,b.jsx)(s.Skeleton,{className:"h-24"}),(0,b.jsx)(s.Skeleton,{className:"h-24"})]}):(0,b.jsx)("div",{className:"space-y-4",children:A.map((a,c)=>{var e;return(0,b.jsx)(d.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*c},children:(0,b.jsx)(p.Card,{className:"shadow-card hover:shadow-card-hover transition-all duration-300",children:(0,b.jsx)(p.CardContent,{className:"p-5",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)("span",{className:"font-semibold text-primary text-lg",children:a.name.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.email}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Joined: ",new Date(a.createdAt).toLocaleDateString()]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(o.Badge,{className:`${{pending:"bg-accent/20 text-accent-foreground",approved:"bg-success/20 text-success",rejected:"bg-destructive/20 text-destructive",suspended:"bg-muted text-muted-foreground"}[a.status]} flex items-center gap-1`,children:[(e=a.status,({pending:(0,b.jsx)(k.Clock,{className:"w-3 h-3"}),approved:(0,b.jsx)(j,{className:"w-3 h-3"}),rejected:(0,b.jsx)(g.X,{className:"w-3 h-3"}),suspended:(0,b.jsx)(i,{className:"w-3 h-3"})})[e]),a.status]}),(0,b.jsxs)("div",{className:"flex gap-2",children:["pending"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(m.Button,{size:"sm",variant:"default",onClick:()=>B(a.id,"approved"),children:[(0,b.jsx)(f.Check,{className:"w-4 h-4 mr-1"}),"Approve"]}),(0,b.jsxs)(m.Button,{size:"sm",variant:"outline",onClick:()=>B(a.id,"rejected"),children:[(0,b.jsx)(g.X,{className:"w-4 h-4 mr-1"}),"Reject"]})]}),"approved"===a.status&&(0,b.jsxs)(m.Button,{size:"sm",variant:"outline",className:"text-destructive",onClick:()=>B(a.id,"suspended"),children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-1"}),"Suspend"]}),("suspended"===a.status||"rejected"===a.status)&&(0,b.jsxs)(m.Button,{size:"sm",variant:"default",onClick:()=>B(a.id,"approved"),children:[(0,b.jsx)(j,{className:"w-4 h-4 mr-1"}),"Reactivate"]})]})]})]})})})},a.id)})}),!u&&0===A.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(l.Users,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No affiliators found"})]})]})}a.s(["default",()=>u],35041)}];

//# sourceMappingURL=_c9e69e58._.js.map