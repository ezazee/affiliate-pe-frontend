{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/game/affiliate-growth-hub/src/lib/mongodb.ts"],"sourcesContent":["import { MongoClient } from 'mongodb';\n\nconst uri = process.env.MONGODB_URI;\nconst options = {};\n\nif (!uri) {\n  throw new Error('Please add your Mongo URI to .env.local');\n}\n\nlet client: MongoClient;\nlet clientPromise: Promise<MongoClient>;\n\nif (process.env.NODE_ENV === 'development') {\n  // In development mode, use a global variable so that the value\n  // is preserved across module reloads caused by HMR (Hot Module Replacement).\n  if (!global._mongoClientPromise) {\n    client = new MongoClient(uri, options);\n    global._mongoClientPromise = client.connect();\n  }\n  clientPromise = global._mongoClientPromise;\n} else {\n  // In production mode, it's best to not use a global variable.\n  client = new MongoClient(uri, options);\n  clientPromise = client.connect();\n}\n\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\nexport default clientPromise;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AACnC,MAAM,UAAU,CAAC;AAEjB,IAAI,CAAC,KAAK;IACR,MAAM,IAAI,MAAM;AAClB;AAEA,IAAI;AACJ,IAAI;AAEJ,wCAA4C;IAC1C,+DAA+D;IAC/D,6EAA6E;IAC7E,IAAI,CAAC,yDAAO,mBAAmB,EAAE;QAC/B,SAAS,IAAI,oKAAW,CAAC,KAAK;QAC9B,yDAAO,mBAAmB,GAAG,OAAO,OAAO;IAC7C;IACA,gBAAgB,yDAAO,mBAAmB;AAC5C;;uCAQe"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///D:/game/affiliate-growth-hub/src/app/api/affiliator/commissions/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport clientPromise from '@/lib/mongodb';\nimport { Commission } from '@/types';\n\nexport async function GET(req: NextRequest) {\n  const { searchParams } = new URL(req.url);\n  const affiliatorId = searchParams.get('affiliatorId');\n\n  if (!affiliatorId) {\n    return NextResponse.json({ error: 'affiliatorId is required' }, { status: 400 });\n  }\n\n  try {\n    const client = await clientPromise;\n    const db = client.db();\n\n    const userCommissions = await db.collection<Commission>('commissions').find({ affiliatorId }).toArray();\n    // Map _id to id for consistency with frontend\n    const formattedCommissions = userCommissions.map(commission => {\n      const { id, ...rest } = commission; // Remove the original 'id' field\n      return {\n        ...rest,\n        id: commission._id.toString(), // Convert ObjectId to string\n      };\n    });\n\n    return NextResponse.json(formattedCommissions);\n  } catch (error) {\n    return NextResponse.json({ error: 'Something went wrong' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe,IAAI,GAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;IACxC,MAAM,eAAe,aAAa,GAAG,CAAC;IAEtC,IAAI,CAAC,cAAc;QACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAChF;IAEA,IAAI;QACF,MAAM,SAAS,MAAM,kIAAa;QAClC,MAAM,KAAK,OAAO,EAAE;QAEpB,MAAM,kBAAkB,MAAM,GAAG,UAAU,CAAa,eAAe,IAAI,CAAC;YAAE;QAAa,GAAG,OAAO;QACrG,8CAA8C;QAC9C,MAAM,uBAAuB,gBAAgB,GAAG,CAAC,CAAA;YAC/C,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,GAAG,YAAY,iCAAiC;YACrE,OAAO;gBACL,GAAG,IAAI;gBACP,IAAI,WAAW,GAAG,CAAC,QAAQ;YAC7B;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF"}}]
}